# 03 - POO level 2

## Exercice 1

Sur la base du diagramme de classes ci-dessous, créer le programme qui permet de saisir les noms de plusieurs personnes puis un nombre de groupes à créer. 

![group_person.png](../images/cours/bts-2/30/group_person.png)

Le programme se chargera ensuite de répartir automatiquement les personnes dans les groupes. 

Finalement il affichera la composition des groupes et le groupe d'appartenance de chaque personne.

??? tip "Indice"
    
    Pour éviter la multiplication des objets, manipuler des pointeurs.
    
??? tip "Indice"
    
    La classe `std::vector` peut être utile.

```
> ./exo_1.exe
Saisir les noms des personnes à créer (! pour arrêter) :
#1 : Bianca
#2 : Tryphon
#3 : Archibald
#4 : Allan
#5 : Piotr
#6 : Tchang
#7 : Seraphin
#8 : !
7 personnes saisies.

Nombre de groupes à créer : 3

1
Bianca (1)
Allan (4)
Seraphin (7)

2
Tryphon (2)
Piotr (5)

3
Archibald (3)
Tchang (6)

Bianca (1) appartient au groupe 1
Tryphon (2) appartient au groupe 2
Archibald (3) appartient au groupe 3
Allan (4) appartient au groupe 1
Piotr (5) appartient au groupe 2
Tchang (6) appartient au groupe 3
Seraphin (7) appartient au groupe 1
```

??? success "Correction"

    :octicons-file-24: exo1/Person.h

    ```cpp
    #include <string>

    #ifndef PERSON_H
    #define PERSON_H

    class Person {
        private :
            int id;
            static int count;
            std::string name;
            Group * group;

        public:
            Person(std::string);
            ~Person();
            static int getCount();
            void display();
    };

    #endif
    ```

    :octicons-file-24: exo1/Person.cpp

    ```cpp
    #include "person.hpp"
    #include <iostream>
    #include <string>

    int Person::count = 0;

    Person::Person(std::string _name) {
        name = _name;
        count++;
        id = count;
    }

    Person::~Person()
    {
        count--;
    }

    int Person::getCount()
    {
        return count;
    }

    void Person::display() {
        std::cout << name << " (" << id << ")" << std::endl;
    }
    ```

    :octicons-file-24: exo1/main.cpp

    ```cpp
    #include <iostream>
    #include <vector>
    #include <string>
    #include "person.hpp"

    using namespace std;

    int main() {
        vector<Person *> allPeople;
        string input = "";
        
        system("chcp 65001");
        system("cls");

        // Saisie
        cout << "Saisir les noms des personnes à créer (! pour arrêter) :" << endl;
        do {
            cout << "#" << allPeople.size() + 1 << " : ";
            cin >> input;
            if (input != "!") {
                allPeople.push_back(new Person(input));
            }
        } while (input != "!");

        cout << Person::getCount() << " personne(s) saisie(s)" << endl;

        // Affichage
        for (int i = 0; i < allPeople.size(); i++) {
            allPeople[i]->display();
        }

        // Nettoyage du tas
        for (int i = 0; i < allPeople.size(); i++) {
            delete allPeople[i];
        }

        return 0;
    }
    ```

