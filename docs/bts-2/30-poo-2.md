# 03 - POO level 2

## Exercice 1

Sur la base du diagramme de classes ci-dessous, créer le programme qui permet de saisir les noms de plusieurs personnes puis un nombre de groupes à créer. 

![group_person.png](../images/cours/bts-2/30/group_person.png)

Le programme se chargera ensuite de répartir automatiquement les personnes dans les groupes. 

Finalement il affichera la composition des groupes et le groupe d'appartenance de chaque personne.
    
??? tip "Indice"
    
    La classe `std::vector` peut être utile.

```
> ./exo_1.exe
Saisir les noms des personnes à créer (! pour arrêter) :
#1 : Bianca
#2 : Tryphon
#3 : Archibald
#4 : Allan
#5 : Piotr
#6 : Tchang
#7 : Seraphin
#8 : !
7 personnes saisies.

Nombre de groupes à créer : 3

1
Bianca (1)
Allan (4)
Seraphin (7)

2
Tryphon (2)
Piotr (5)

3
Archibald (3)
Tchang (6)

Bianca (1) appartient au groupe 1
Tryphon (2) appartient au groupe 2
Archibald (3) appartient au groupe 3
Allan (4) appartient au groupe 1
Piotr (5) appartient au groupe 2
Tchang (6) appartient au groupe 3
Seraphin (7) appartient au groupe 1
```

??? success "Correction"

    Solution intermédiaire

    :octicons-file-24: exo1/Person.hpp

    ```cpp
    #include <string>

    #ifndef PERSON_H
    #define PERSON_H

    class Person {
        private :
            int id;
            static int count;
            std::string name;

        public:
            Person(std::string);
            static int getCount();
            void display();
    };

    #endif
    ```

    :octicons-file-24: exo1/Person.cpp

    ```cpp
    #include "person.hpp"
    #include <iostream>
    #include <string>

    int Person::count = 0;

    Person::Person(std::string _name) {
        name = _name;
        count++;
        id = count;
    }

    int Person::getCount()
    {
        return count;
    }

    void Person::display() {
        std::cout << name << " (" << id << ")" << std::endl;
    }
    ```

    :octicons-file-24: exo1/Group.hpp

    ```cpp
    #include <vector>
    #include "person.hpp"

    #ifndef GROUP_H
    #define GROUP_H

    class Group {
        private :
            int id;
            std::vector<Person> people;
            static int count;

        public :
            Group();
            void addPerson(Person &);   // Passage par référence pour ne pas multiplier les objets
            void display();
            static int getCount();
    };

    #endif
    ```

    :octicons-file-24: exo1/Group.cpp

    ```cpp
    #include "group.hpp"
    #include "person.hpp"
    #include <iostream>

    int Group::count = 0;

    Group::Group() {
        count++;
        id = count;
    }

    void Group::addPerson(Person & p) {
        people.push_back(p);
    }

    void Group::display() {
        std::cout << id << std::endl;
        for (int i = 0; i < people.size(); i++) {
            people[i].display();
        }
    }
    ```

    :octicons-file-24: exo1/main.cpp

    ```cpp
    #include <iostream>
    #include <vector>
    #include <string>
    #include "person.hpp"
    #include "group.hpp"

    using namespace std;

    int main() {

        vector<Person> allPeople;   // Un tableau pour stocker les personnes créées au fur et à mesure.
        vector<Group>  allGroups;   // Un tableau pour stocker les groupes créés.
        
        string input = "";          // Un tampon pour récupérer les noms saisis.
        int nbGroups = 0;
        
        system("chcp 65001");       // Passage de la console Windows en UTF-8
        system("cls");              // Nettoyage de la console

        // Saisie
        cout << "Saisir les noms des personnes à créer (vide pour arrêter) :" << endl;
        do {
            cout << "#" << allPeople.size() + 1 << " : ";
            
            getline(cin, input);    // Permet d'autoriser les saisies vides.

            // Création d'une nouvelle personne
            if (input != "") {
                allPeople.push_back(Person(input));
            }

        } while (input != "");

        cout << endl << allPeople.size() << " personne(s) saisie(s)" << endl << endl;

        // Création des groupes
        do {
            cout << "Nombre de groupes à créer : ";
            cin >> nbGroups;
        } while (nbGroups <= 0);
        for (int i = 0; i < nbGroups; i++) {
            allGroups.push_back(Group());
        }

        // Répartition des personnes dans les groupes
        for (int i = 0; i < allPeople.size(); i++) {
            allGroups[i % nbGroups].addPerson(allPeople[i]);
        }

        // Affichage
        cout << endl;
        for (int i = 0; i < allGroups.size(); i++) {
            allGroups[i].display();
            cout << endl;
        }

        return 0;
    }
    ```

